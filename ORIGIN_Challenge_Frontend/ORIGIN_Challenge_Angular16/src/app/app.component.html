<link rel="stylesheet"
  href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
<div class="toolbar" role="banner">
  <img width="40" alt="Angular Logo"
    src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg==" />
  <span>Bienvenido al CHALLENGE ORIGIN de Elias Vallejos</span>
  <div class="spacer"></div>
  <a aria-label="LinkedIn" target="_blank" href="https://linkedin.com/in/elias-vallejos-24001089/" title="LinkedIn"
    class="linkedin-icon">
    <img id="linkedin-logo" src="../assets/linkedin-logo1.png" alt="LinkedIn Logo" />
  </a>
</div>
<div class="content" role="main">
  <div class="alert" role="alert"
    [ngClass]="{'show-alert': this.modal.visible, 'hide-alert': !this.modal.visible, 
    'alert-success': this.modal.tipo == 'OK', 'alert-warning': this.modal.tipo == 'WARN', 'alert-danger': this.modal.tipo == 'ERR'}"
    style="margin-top: -70px; position: fixed; width: 50%; z-index: 1000;">
    <h4 class="alert-heading">{{ this.modal.titulo }}</h4>
    <p>{{ this.modal.contenido }}</p>
  </div>
  <div *ngIf="spinner" class="spinner-border text-primary" role="status"
    style="width: 180px; height: 180px; position:absolute; margin-top: 100px;">
  </div>

  <!-- paso 1: entrar en la aplicacion -->
  <div *ngIf="!spinner && paso == 1">
    <h4 class="card-container" style="margin-bottom: 30px;">Aplicación</h4>
    <br>
    <button class="btn btn-primary" (click)="agregarTarjetaAleatoria()">Agregar tarjetas aleatorias a la BD</button>
    <div class="card-container">
      <a class="card" (click)="paso = 2;">
        <span class="material-symbols-outlined">group</span>
        &nbsp;&nbsp;
        <span>ATM (cajero automático)</span>
        <svg class="material-icons" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
        </svg>
      </a>
    </div>
  </div>

  <!-- paso 2: ingresar numero de tarjeta -->
  <div *ngIf="!spinner && paso == 2" style="width: 50%;">
    <app-teclado-numerico titulo="Número de Tarjeta" tipo="esTarjeta" formato="XXXX-XXXX-XXXX-XXXX"
      (mensaje)="showAlert('WARN', $event, '')"
      (presionoAceptar)="verificarNumero($event.tipo, $event.numero)"></app-teclado-numerico>
  </div>

  <!-- paso 3: ingresar numero de pin -->
  <div *ngIf="!spinner && paso == 3" style="width: 50%;">
    <app-teclado-numerico titulo="Número de PIN" tipo="esPin" formato="XXXX" (mensaje)="showAlert('WARN', $event, '')"
      (presionoAceptar)="verificarNumero($event.tipo, $event.numero)"></app-teclado-numerico>
  </div>

  <!-- paso 4: elegir la operacion -->
  <div *ngIf="!spinner && paso == 4">
    <h4 class="card-container" style="margin-bottom: 30px;">Operaciones</h4>
    <br>
    <div class="card-container">
      <a class="card" (click)="abrirBalance();">
        <span class="material-symbols-outlined">monetization_on</span>
        &nbsp;&nbsp;
        <span>Balance</span>
        <svg class="material-icons" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
        </svg>
      </a>
    </div>
    <div class="card-container">
      <a class="card" (click)="this.paso = 6;">
        <span class="material-symbols-outlined">universal_currency_alt</span>
        &nbsp;&nbsp;
        <span>Retiro</span>
        <svg class="material-icons" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
        </svg>
      </a>
    </div>
  </div>

  <!-- paso 5: ver el balance -->
  <div *ngIf="paso == 5">
    <div class="container p-4 d-flex justify-content-center">
      <div class="row" style="width: 600px;">
        <div class="col-6 d-flex justify-content-center" style="margin-top: 5%;">
          <div *ngIf="spinner" class="spinner-border text-primary" role="status"
            style="width: 180px; height: 180px; position:absolute; margin-top: -10px;">
          </div>
          <img src="assets/tarjeta.png" alt="Imagen de tarjeta" width="200" style="margin-top: -20px;">
        </div>
        <div class="col-6" style="margin-top: 20px;">
          <form class="d-flex flex-column col-12" [style.width]="'100%'">
            <label for="numeroTarjeta">Numero Tarjeta:</label>
            <input id="numeroTarjeta" name="numeroTarjeta" class="form-control btn-group" style="height: 40px;"
              [(ngModel)]="tarjetaSinGuiones" disabled="disabled">
            <label for="fechaVencimiento">Fecha Vencimiento:</label>
            <input id="fechaVencimiento" name="fechaVencimiento" class="form-control btn-group" style="height: 40px;"
              [(ngModel)]="fechaVencimiento" disabled="disabled">
            <label for="balance">Dinero en Cuenta:</label>
            <input id="balance" name="balance" class="form-control btn-group" style="height: 40px;"
              [(ngModel)]="dineroEnCuenta" disabled="disabled">
          </form>
        </div>
      </div>
    </div>
    <div *ngIf="operaciones.length" class="row container" style="width: 120%; margin-left: -6%; margin-top: 6%;">
      <div class="d-flex justify-content-center highlight-card table table-primary" style="width: 90%; height: 100%;">
        <table>
          <thead>
            <tr>
              <th>Fecha Operacion</th>
              <th>Codigo Operacion</th>
              <th>Retiros</th>
              <th>Balance</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let operacion of operaciones">
              <td style="min-width: 250px;">{{ operacion.fecha }}</td>
              <td style="min-width: 170px;">{{ operacion.codigoOperacion }}</td>
              <td style="min-width: 100px;">{{ operacion.cantidadRetiro }}</td>
              <td style="min-width: 100px;">{{ operacion.balance }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="d-flex justify-content-center">
      <div class="btn btn-primary" style="margin-top: 50px; margin-bottom: -40px;" (click)="paso = 4">Atras
      </div>
    </div>
  </div>

  <!-- paso 6: realizar un retiro -->
  <div *ngIf="!spinner && paso == 6" style="width: 50%;">
    <app-teclado-numerico titulo="Cantidad a Retirar" tipo="esRetiro" formato="0"
      (mensaje)="showAlert('WARN', $event, '')"
      (presionoAceptar)="verificarNumero($event.tipo, $event.numero)"></app-teclado-numerico>
    <div class="d-flex justify-content-center">
      <div class="btn btn-primary" style="margin-top: 50px; margin-bottom: -40px;" (click)="paso = 4;">Atras
      </div>
    </div>
  </div>

  <div *ngIf="!spinner && paso > 1" class="btn btn-primary" style="margin-top: 50px;" (click)="salirAplicacion()">Salir
  </div>
</div>
<router-outlet></router-outlet>